{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-3e5c16c8\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container mx-auto p-4\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-2xl font-semibold mb-4\"\n}, \"Transactions\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  key: 0,\n  class: \"bg-white shadow-md rounded-lg overflow-hidden\"\n};\nconst _hoisted_4 = {\n  class: \"flex justify-between items-center\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"flex items-center space-x-4\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"p-2 inline-flex items-center justify-center text-green-500\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-arrow-down\"\n}), /*#__PURE__*/_createCommentVNode(\" Icone de revenu \")], -1 /* HOISTED */));\nconst _hoisted_7 = {\n  class: \"flex-1\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"text-sm font-semibold text-gray-600\"\n}, \"Revenu\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"text-gray-800\"\n};\nconst _hoisted_10 = {\n  class: \"text-gray-500 text-xs\"\n};\nconst _hoisted_11 = {\n  class: \"text-green-500 font-semibold\"\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"flex-1\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_13 = {\n  key: 2,\n  class: \"flex items-center justify-end space-x-4\"\n};\nconst _hoisted_14 = {\n  class: \"text-red-500 font-semibold\"\n};\nconst _hoisted_15 = {\n  class: \"flex-1 text-right\"\n};\nconst _hoisted_16 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"text-sm font-semibold text-gray-600\"\n}, \"Dépense\", -1 /* HOISTED */));\nconst _hoisted_17 = {\n  class: \"text-gray-800\"\n};\nconst _hoisted_18 = {\n  class: \"text-gray-500 text-xs\"\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"p-2 inline-flex items-center justify-center text-red-500\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-arrow-up\"\n}), /*#__PURE__*/_createCommentVNode(\" Icone de dépense \")], -1 /* HOISTED */));\nconst _hoisted_20 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-red-500\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_21 = {\n  key: 1,\n  class: \"text-center py-4\"\n};\nconst _hoisted_22 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Aucune transaction disponible.\", -1 /* HOISTED */));\nconst _hoisted_23 = [_hoisted_22];\nconst _hoisted_24 = {\n  class: \"mt-8\"\n};\nexport function render(_ctx, _cache) {\n  const _component_line_chart = _resolveComponent(\"line-chart\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _ctx.transactions.length ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.transactions, transaction => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: transaction.id,\n      class: \"px-6 py-4 border-b hover:bg-gray-100\"\n    }, [_createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" Section pour Revenus \"), transaction.category === 'revenu' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"p\", _hoisted_9, _toDisplayString(transaction.description), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_10, _toDisplayString(_ctx.formatDate(transaction.date)), 1 /* TEXT */)]), _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.formatAmount(transaction.amount)), 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createCommentVNode(\" Placeholder quand il n'y a pas de revenu \"), _hoisted_12], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" Section pour Dépenses \"), transaction.category === 'dépense' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"span\", _hoisted_14, _toDisplayString(_ctx.formatAmount(transaction.amount)), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_15, [_hoisted_16, _createElementVNode(\"p\", _hoisted_17, _toDisplayString(transaction.description), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_18, _toDisplayString(_ctx.formatDate(transaction.date)), 1 /* TEXT */)]), _hoisted_19])) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 3\n    }, [_createCommentVNode(\" Placeholder quand il n'y a pas de dépense \"), _hoisted_20], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [..._hoisted_23])), _createElementVNode(\"div\", _hoisted_24, [_createVNode(_component_line_chart, {\n    \"chart-data\": _ctx.chartData,\n    options: _ctx.chartOptions\n  }, null, 8 /* PROPS */, [\"chart-data\", \"options\"])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createCommentVNode","_hoisted_22","_createElementBlock","_hoisted_1","_hoisted_2","_ctx","transactions","length","_hoisted_3","_Fragment","_renderList","transaction","key","id","_hoisted_4","category","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","description","_hoisted_10","formatDate","date","_hoisted_11","formatAmount","amount","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_23","_hoisted_24","_createVNode","_component_line_chart","chartData","options","chartOptions"],"sources":["/Users/djahnickefrei/monProjet/bank-frontend/src/components/TransactionList.vue"],"sourcesContent":["<template>\n  <div class=\"container mx-auto p-4\">\n    <h2 class=\"text-2xl font-semibold mb-4\">Transactions</h2>\n    <ul v-if=\"transactions.length\" class=\"bg-white shadow-md rounded-lg overflow-hidden\">\n      <li v-for=\"transaction in transactions\" :key=\"transaction.id\" class=\"px-6 py-4 border-b hover:bg-gray-100\">\n        <div class=\"flex justify-between items-center\">\n          <!-- Section pour Revenus -->\n          <div v-if=\"transaction.category === 'revenu'\" class=\"flex items-center space-x-4\">\n            <span class=\"p-2 inline-flex items-center justify-center text-green-500\">\n              <i class=\"fas fa-arrow-down\"></i> <!-- Icone de revenu -->\n            </span>\n            <div class=\"flex-1\">\n              <p class=\"text-sm font-semibold text-gray-600\">Revenu</p>\n              <p class=\"text-gray-800\">{{ transaction.description }}</p>\n              <p class=\"text-gray-500 text-xs\">{{ formatDate(transaction.date) }}</p>\n            </div>\n            <span class=\"text-green-500 font-semibold\">{{ formatAmount(transaction.amount) }}</span>\n          </div>\n          \n          <!-- Placeholder quand il n'y a pas de revenu -->\n          <div v-else class=\"flex-1\"></div>\n          \n          <!-- Section pour Dépenses -->\n          <div v-if=\"transaction.category === 'dépense'\" class=\"flex items-center justify-end space-x-4\">\n            <span class=\"text-red-500 font-semibold\">{{ formatAmount(transaction.amount) }}</span>\n            <div class=\"flex-1 text-right\">\n              <p class=\"text-sm font-semibold text-gray-600\">Dépense</p>\n              <p class=\"text-gray-800\">{{ transaction.description }}</p>\n              <p class=\"text-gray-500 text-xs\">{{ formatDate(transaction.date) }}</p>\n            </div>\n            <span class=\"p-2 inline-flex items-center justify-center text-red-500\">\n              <i class=\"fas fa-arrow-up\"></i> <!-- Icone de dépense -->\n            </span>\n          </div>\n          \n          <!-- Placeholder quand il n'y a pas de dépense -->\n          <div v-else class=\"text-red-500\"></div>\n        </div>\n      </li>\n    </ul>\n    <div v-else class=\"text-center py-4\">\n      <p>Aucune transaction disponible.</p>\n    </div>\n    <div class=\"mt-8\">\n      <line-chart :chart-data=\"chartData\" :options=\"chartOptions\"></line-chart>\n    </div>\n  </div>\n</template>\n\n\n<script>\n<script>\nimport axios from 'axios';\nimport { defineComponent } from 'vue';\nimport { Line } from 'vue-chart-3';\nimport { Chart as ChartJS, Title, Tooltip, LineElement, Legend, CategoryScale, LinearScale, PointElement } from 'chart.js';\n\n// Register the components required by Chart.js\nChartJS.register(Title, Tooltip, LineElement, Legend, CategoryScale, LinearScale, PointElement);\n\n// Register the components required by Chart.js\nChartJS.register(Title, Tooltip, LineElement, Legend, CategoryScale, LinearScale, PointElement);\n\nexport default defineComponent({\n  name: 'TransactionList',\n  components: {\n    LineChart: Line\n  },\n  props: {\n    accountId: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      transactions: [],\n      chartData: null,\n      chartOptions: {\n        responsive: true,\n        maintainAspectRatio: false,\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    };\n  },\n  watch: {\n    accountId: {\n      immediate: true,\n      handler(newVal, oldVal) {\n        if (newVal !== oldVal) {\n          this.fetchTransactions();\n        }\n      }\n    },\n    transactions: {\n      deep: true,\n      handler() {\n        this.buildChartData();\n      }\n    }\n  },\n  mounted() {\n    this.fetchTransactions();\n  },\n  methods: {\n    async fetchTransactions() {\n      try {\n        const response = await axios.get(`http://localhost:3000/accounts/${this.accountId}/transactions`);\n        this.transactions = response.data;\n      } catch (error) {\n        console.error('Erreur lors de la récupération des transactions', error);\n      }\n    },\n    buildChartData() {\n      const sortedTransactions = this.transactions.sort((a, b) => new Date(a.date) - new Date(b.date));\n      this.chartData = {\n        labels: sortedTransactions.map(t => this.formatDate(t.date)),\n        datasets: [{\n          label: 'Dépenses',\n          backgroundColor: 'rgb(255, 99, 132)',\n          borderColor: 'rgb(255, 99, 132)',\n          data: sortedTransactions.map(t => t.category === 'dépense' ? t.amount : 0),\n          fill: false,\n        }]\n      };\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('fr-FR');\n    },\n    formatAmount(amount) {\n      return new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR' }).format(amount);\n    }\n  }\n});\n</script>\n\n<style scoped>\n/* Tailwind classes are handling all the styling needs. If you have custom styles, you can add them here */\n</style>\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAuB;gEAChCC,mBAAA,CAAyD;EAArDD,KAAK,EAAC;AAA6B,GAAC,cAAY;;;EACrBA,KAAK,EAAC;;;EAE5BA,KAAK,EAAC;AAAmC;;;EAEEA,KAAK,EAAC;;gEAClDC,mBAAA,CAEO;EAFDD,KAAK,EAAC;AAA4D,I,aACtEC,mBAAA,CAAiC;EAA9BD,KAAK,EAAC;AAAmB,I,aAAME,mBAAA,qBAAwB,C;;EAEvDF,KAAK,EAAC;AAAQ;gEACjBC,mBAAA,CAAyD;EAAtDD,KAAK,EAAC;AAAqC,GAAC,QAAM;;EAClDA,KAAK,EAAC;AAAe;;EACrBA,KAAK,EAAC;AAAuB;;EAE5BA,KAAK,EAAC;AAA8B;iEAI5CC,mBAAA,CAAiC;EAArBD,KAAK,EAAC;AAAQ;;;EAGqBA,KAAK,EAAC;;;EAC7CA,KAAK,EAAC;AAA4B;;EACnCA,KAAK,EAAC;AAAmB;iEAC5BC,mBAAA,CAA0D;EAAvDD,KAAK,EAAC;AAAqC,GAAC,SAAO;;EACnDA,KAAK,EAAC;AAAe;;EACrBA,KAAK,EAAC;AAAuB;iEAElCC,mBAAA,CAEO;EAFDD,KAAK,EAAC;AAA0D,I,aACpEC,mBAAA,CAA+B;EAA5BD,KAAK,EAAC;AAAiB,I,aAAME,mBAAA,sBAAyB,C;iEAK7DD,mBAAA,CAAuC;EAA3BD,KAAK,EAAC;AAAc;;;EAI1BA,KAAK,EAAC;;iEAChBC,mBAAA,CAAqC,WAAlC,gCAA8B;qBAAjCE,WAAqC,C;;EAElCH,KAAK,EAAC;AAAM;;;uBA1CnBI,mBAAA,CA6CM,OA7CNC,UA6CM,GA5CJC,UAAyD,EAC/CC,IAAA,CAAAC,YAAY,CAACC,MAAM,I,cAA7BL,mBAAA,CAoCK,MApCLM,UAoCK,I,kBAnCHN,mBAAA,CAkCKO,SAAA,QAAAC,WAAA,CAlCqBL,IAAA,CAAAC,YAAY,EAA3BK,WAAW;yBAAtBT,mBAAA,CAkCK;MAlCoCU,GAAG,EAAED,WAAW,CAACE,EAAE;MAAEf,KAAK,EAAC;QAClEC,mBAAA,CAgCM,OAhCNe,UAgCM,GA/BJd,mBAAA,0BAA6B,EAClBW,WAAW,CAACI,QAAQ,iB,cAA/Bb,mBAAA,CAUM,OAVNc,UAUM,GATJC,UAEO,EACPlB,mBAAA,CAIM,OAJNmB,UAIM,GAHJC,UAAyD,EACzDpB,mBAAA,CAA0D,KAA1DqB,UAA0D,EAAAC,gBAAA,CAA9BV,WAAW,CAACW,WAAW,kBACnDvB,mBAAA,CAAuE,KAAvEwB,WAAuE,EAAAF,gBAAA,CAAnChB,IAAA,CAAAmB,UAAU,CAACb,WAAW,CAACc,IAAI,kB,GAEjE1B,mBAAA,CAAwF,QAAxF2B,WAAwF,EAAAL,gBAAA,CAA1ChB,IAAA,CAAAsB,YAAY,CAAChB,WAAW,CAACiB,MAAM,kB,oBAI/E1B,mBAAA,CAAiCO,SAAA;MAAAG,GAAA;IAAA,IADjCZ,mBAAA,8CAAiD,EACjD6B,WAAiC,C,mDAEjC7B,mBAAA,2BAA8B,EACnBW,WAAW,CAACI,QAAQ,kB,cAA/Bb,mBAAA,CAUM,OAVN4B,WAUM,GATJ/B,mBAAA,CAAsF,QAAtFgC,WAAsF,EAAAV,gBAAA,CAA1ChB,IAAA,CAAAsB,YAAY,CAAChB,WAAW,CAACiB,MAAM,mBAC3E7B,mBAAA,CAIM,OAJNiC,WAIM,GAHJC,WAA0D,EAC1DlC,mBAAA,CAA0D,KAA1DmC,WAA0D,EAAAb,gBAAA,CAA9BV,WAAW,CAACW,WAAW,kBACnDvB,mBAAA,CAAuE,KAAvEoC,WAAuE,EAAAd,gBAAA,CAAnChB,IAAA,CAAAmB,UAAU,CAACb,WAAW,CAACc,IAAI,kB,GAEjEW,WAEO,C,oBAITlC,mBAAA,CAAuCO,SAAA;MAAAG,GAAA;IAAA,IADvCZ,mBAAA,+CAAkD,EAClDqC,WAAuC,C;qDAI7CnC,mBAAA,CAEM,OAFNoC,WAEM,MAAAC,WAAA,KACNxC,mBAAA,CAEM,OAFNyC,WAEM,GADJC,YAAA,CAAyEC,qBAAA;IAA5D,YAAU,EAAErC,IAAA,CAAAsC,SAAS;IAAGC,OAAO,EAAEvC,IAAA,CAAAwC"},"metadata":{},"sourceType":"module","externalDependencies":[]}